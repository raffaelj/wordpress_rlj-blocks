!function(e){function t(r){if(l[r])return l[r].exports;var a=l[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var l={};t.m=e,t.c=l,t.d=function(e,l,r){t.o(e,l)||Object.defineProperty(e,l,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var l=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(l,"a",l),l},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(l(1),l(3)),a=(l.n(r),l(4));l.n(a)},function(e,t,l){"use strict";var r=l(2),a=(l.n(r),"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}),__=wp.i18n.__,n=wp.blocks.registerBlockType,i=wp.blockEditor,o=(i.BlockControls,i.BlockIcon,i.InnerBlocks),s=i.InspectorControls,u=i.MediaPlaceholder,c=i.MediaUpload,d=i.MediaUploadCheck,m=i.withColors,b=i.PanelColorSettings,p=wp.components,g=p.Button,w=p.FormToggle,y=p.PanelBody,h=p.PanelRow,f=p.SelectControl,v=["image"],E=wp.element.createElement,k=wp.compose.createHigherOrderComponent(function(e){return function(t){var l=E(e,t);return"rlj/section"===t.name&&"undefined"===typeof t.insertBlocksAfter&&(l=E("div",{})),E(wp.element.Fragment,{},l)}},"allowSectionStyles");wp.hooks.addFilter("editor.BlockEdit","rlj/section",k),n("rlj/section",{title:__("Section"),icon:"layout",category:"common",keywords:[__("rlj-blocks"),__("Background"),__("Wrapper")],supports:{align:["full","wide"],anchor:!0},styles:[{name:"default",label:__("Default"),isDefault:!0},{name:"rounded",label:__("Rounded")},{name:"shadow",label:__("Shadow")},{name:"shadow-rounded",label:__("Shadow + Rounded")}],attributes:{url:{type:"string"},size:{type:"string",default:"large"},sizes:{type:"object"},id:{type:"number"},hasParallax:{type:"boolean",default:!1},overlay:{type:"boolean",default:!1},hideBackgroundWhileEditing:{type:"boolean",default:!1},backgroundColor:{type:"string"},customBackgroundColor:{type:"string"}},edit:m("backgroundColor")(function(e){var t={},l=e.className,r={maxHeight:"150px",margin:"0 auto"},n={maxWidth:"40px",maxHeight:"40px",margin:"0",position:"absolute",right:"0",opacity:".3"};return e.attributes.url&&(e.attributes.hideBackgroundWhileEditing||(t.backgroundImage="url("+e.attributes.url+")"),l+=" has-background",e.attributes.hasParallax&&(l+=" has-parallax")),e.backgroundColor.color&&e.backgroundColor.color&&(t.backgroundColor=e.backgroundColor.color),e.attributes.overlay&&(l+=" has-background-dim"),[wp.element.createElement(s,null,wp.element.createElement(y,null,wp.element.createElement(h,null,!e.attributes.url&&wp.element.createElement(u,{labels:{title:__("Background"),instructions:__("Upload an image or pick one from your media library.")},onSelect:function(t){e.setAttributes({id:t.id,url:t.url,sizes:t.sizes}),e.attributes.size&&t.sizes[e.attributes.size]&&e.setAttributes({url:t.sizes[e.attributes.size].url})},accept:"image/*",allowedTypes:v,notices:e.noticeUI,onError:e.onUploadError})),e.attributes.url&&wp.element.createElement(h,null,wp.element.createElement("img",{src:e.attributes.url,style:r})),e.attributes.url&&wp.element.createElement(h,null,wp.element.createElement(d,null,wp.element.createElement(c,{onSelect:function(t){e.setAttributes({id:t.id,url:t.url,sizes:t.sizes}),e.attributes.size&&t.sizes[e.attributes.size]&&e.setAttributes({url:t.sizes[e.attributes.size].url})},allowedTypes:v,value:e.attributes.id,render:function(e){var t=e.open;return wp.element.createElement(g,{onClick:t,className:"button button-large"},__("Change background"))}}))),e.attributes.url&&wp.element.createElement(h,null,wp.element.createElement(g,{onClick:function(){e.setAttributes({id:null,url:null})},className:"button button-large"},__("Remove background"))),e.attributes.url&&wp.element.createElement(h,null,wp.element.createElement(f,{label:__("Image Size"),value:e.attributes.size||"",options:function(){return"object"==a(e.attributes.sizes)?Object.keys(e.attributes.sizes).map(function(e){return{label:e,value:e}}):[]}(),onChange:function(t){e.setAttributes({size:t,url:e.attributes.sizes[t].url})}})),e.attributes.url&&wp.element.createElement(h,null,wp.element.createElement("label",{htmlFor:"rlj-section-has-parallax"},__("Fixed background","rlj")),wp.element.createElement(w,{id:"rlj-section-has-parallax",label:__("Fixed background","rlj"),checked:e.attributes.hasParallax,onChange:function(){e.setAttributes({hasParallax:!e.attributes.hasParallax})}})),e.attributes.url&&wp.element.createElement(h,null,wp.element.createElement("label",{htmlFor:"rlj-section-hide-background"},__("Hide background while editing","rlj")),wp.element.createElement(w,{id:"rlj-section-hide-background",label:__("Hide background while editing","rlj"),checked:e.attributes.hideBackgroundWhileEditing,onChange:function(){e.setAttributes({hideBackgroundWhileEditing:!e.attributes.hideBackgroundWhileEditing})}}))),wp.element.createElement(b,{title:__("Color Settings"),initialOpen:!1,colorSettings:[{value:e.backgroundColor.color,onChange:e.setBackgroundColor,label:__("Background Color")}]})),wp.element.createElement("div",{className:l,style:t},e.attributes.url&&e.attributes.hideBackgroundWhileEditing&&wp.element.createElement("img",{src:e.attributes.url,style:n}),wp.element.createElement(o,null))]}),save:function(e){var t={},l="";return e.attributes.url&&(t.backgroundImage="url("+e.attributes.url+")",l+=" has-background",e.attributes.hasParallax&&(l+=" has-parallax")),e.attributes.backgroundColor&&(l+=" has-"+e.attributes.backgroundColor+"-background-color"),e.attributes.customBackgroundColor&&(t.backgroundColor=e.attributes.customBackgroundColor),e.attributes.overlay&&(l+=" has-background-dim"),wp.element.createElement("div",{className:l,style:t},wp.element.createElement(o.Content,null))}})},function(e,t){},function(e,t){var l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},__=wp.i18n.__,r=wp.blocks.registerBlockType,a=wp.blockEditor,n=a.InspectorControls,i=a.MediaPlaceholder,o=a.MediaUpload,s=a.MediaUploadCheck,u=wp.components,c=u.Button,d=u.FormToggle,m=u.PanelBody,b=u.PanelRow,p=u.SelectControl,g=u.TextControl,w=["image"];r("rlj/videolink",{title:__("Videolink"),icon:"format-video",category:"embed",keywords:[__("rlj-blocks"),__("Video"),__("YouTube"),__("Vimeo")],attributes:{url:{type:"string"},text:{type:"string"},title:{type:"string"},id:{type:"string"},provider:{type:"string"},width:{type:"integer"},height:{type:"integer"},ratio:{type:"string",default:"16-9"},asset_id:{type:"string"},asset_url:{type:"string"},asset_size:{type:"string"},asset_sizes:{type:"object"},displayText:{type:"boolean",default:!0}},edit:function(e){function t(t){if(!a)return void console.log("module VideoLinkField is missing or not configured correctly");var l=t,n=r(l),i={video_id:n.id,video_provider:n.provider};n.id&&"none"!=n.id?(e.setAttributes({provider:n.provider,id:n.id,url:l}),jQuery.ajax({url:COCKPIT_VIDEOLINK_ROUTE+"/getVideoLinkData",type:"post",data:i,success:function(t){e.setAttributes(u?{width:t.width,height:t.height,asset_id:t._id,text:t.title,asset_url:COCKPIT_UPLOAD_FOLDER+t.path}:{width:t.meta.width,height:t.meta.height,asset_id:t.ID,text:t.post_title,asset_url:t.guid})},error:function(e){console.log(e)}})):e.setAttributes({provider:null,id:null,url:null,text:null,asset_id:null,asset_url:null,width:null,height:null})}function r(e){var t={},l=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,r=/https?:\/\/(?:www\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|)(\d+)(?:$|\/|\?)/,a=e.match(l);return a&&11==a[2].length?(t.id=a[2],t.provider="youtube"):(a=e.match(r),a?(t.id=a[3],t.provider="vimeo"):(t.id="none",t.provider="none")),t}var a="undefined"!=typeof COCKPIT_VIDEOLINK_ROUTE,u="undefined"!=typeof COCKPIT_UPLOAD_FOLDER,y={textAlign:"center"},h={display:"block",margin:"0 auto"},f="video_embed_container ratio-"+e.attributes.ratio;return[wp.element.createElement(n,null,wp.element.createElement(m,null,wp.element.createElement(b,null,wp.element.createElement(g,{label:__("Url"),value:e.attributes.url,help:__("Enter a YouTube or Vimeo link."),onChange:t})),wp.element.createElement(b,null,wp.element.createElement(g,{label:__("Text"),value:e.attributes.text,onChange:function(t){e.setAttributes({text:t})}})),wp.element.createElement(b,null,wp.element.createElement("label",{htmlFor:"rlj-videolink-display-text"},__("Display text","rlj")),wp.element.createElement(d,{id:"rlj-videolink-display-text",label:__("Display text","rlj"),checked:e.attributes.displayText,onChange:function(){e.setAttributes({displayText:!e.attributes.displayText})}})),wp.element.createElement(b,null,wp.element.createElement(p,{label:__("Aspect Ratio"),value:e.attributes.ratio||"",options:[{label:"16:9",value:"16-9"},{label:"4:3",value:"4-3"}],onChange:function(t){e.setAttributes({ratio:t})}})),wp.element.createElement(b,null,wp.element.createElement("p",null,__("Thumbnails are stored in your media library."))),!e.attributes.asset_url&&wp.element.createElement(b,null,wp.element.createElement(i,{labels:{title:__("Thumbnail"),instructions:__("Upload an image or pick one from your media library.")},onSelect:function(t){e.setAttributes({asset_id:t.id,asset_url:t.url,asset_sizes:t.sizes}),e.attributes.asset_size&&t.sizes[e.attributes.asset_size]&&e.setAttributes({url:t.sizes[e.attributes.asset_size].url})},accept:"image/*",allowedTypes:w,notices:e.noticeUI,onError:e.onUploadError})),e.attributes.asset_url&&wp.element.createElement(b,null,wp.element.createElement("img",{src:e.attributes.asset_url,style:h})),e.attributes.asset_url&&wp.element.createElement(b,null,wp.element.createElement(s,null,wp.element.createElement(o,{onSelect:function(t){e.setAttributes({asset_id:t.id,asset_url:t.url,asset_sizes:t.sizes}),e.attributes.asset_size&&t.sizes[e.attributes.asset_size]&&e.setAttributes({url:t.sizes[e.attributes.asset_size].url})},allowedTypes:w,value:e.attributes.asset_id,render:function(e){var t=e.open;return wp.element.createElement(c,{onClick:t,className:"button button-large"},__("Change thumbnail"))}}))),e.attributes.asset_url&&wp.element.createElement(b,null,wp.element.createElement(p,{label:__("Image Size"),value:e.attributes.asset_size||"",options:function(){return"object"==l(e.attributes.asset_sizes)?Object.keys(e.attributes.asset_sizes).map(function(e){return{label:e,value:e}}):[]}(),onChange:function(t){e.setAttributes({asset_size:t,asset_url:e.attributes.asset_sizes[t].url})}})))),wp.element.createElement("div",{style:y},wp.element.createElement("div",{class:f},(!e.attributes.id||"none"==e.attributes.id)&&wp.element.createElement(g,{label:__("Url"),value:e.attributes.url,help:__("Enter a YouTube or Vimeo link."),onChange:t}),e.attributes.id&&e.attributes.asset_url&&wp.element.createElement("img",{src:e.attributes.asset_url,alt:"video thumbnail"}),e.attributes.id&&e.attributes.asset_url&&wp.element.createElement("span",{href:"#",class:"icon-play","aria-label":__("Play")})),e.attributes.id&&e.attributes.asset_url&&wp.element.createElement("a",{href:e.attributes.url,title:e.attributes.title,"data-video-provider":e.attributes.provider,"data-video-id":e.attributes.id,"data-video-width":e.attributes.width,"data-video-height":e.attributes.height,"data-video-thumb":e.attributes.asset_url},e.attributes.displayText?e.attributes.text:""))]},save:function(e){var t="",l="";"youtube"==e.attributes.provider?(t="https://www.youtube-nocookie.com/embed/"+e.attributes.id+"?enablejsapi=1&rel=0&showinfo=0&autoplay=1",l="https://www.youtube.com/watch?v="+e.attributes.id):"vimeo"==e.attributes.provider&&(t="https://player.vimeo.com/video/"+e.attributes.id+"?color=ffffff&title=0&byline=0&portrait=0&autoplay=1",l="https://vimeo.com/"+e.attributes.id);var r="video_embed_container ratio-"+e.attributes.ratio,a={backgroundImage:"url("+e.attributes.asset_url+")"},n=wp.element.createElement("div",{class:r},wp.element.createElement("iframe",{class:"video_embed",src:"about:blank","data-src":t,"data-provider":e.attributes.provider,style:a,width:e.attributes.width,height:e.attributes.height,allow:"autoplay; fullscreen",allowfullscreen:"",title:__("Video")}),wp.element.createElement("a",{href:"#",class:"icon-play","aria-label":__("Play")}));return wp.element.createElement("div",null,n,e.attributes.displayText&&wp.element.createElement("a",{href:l},e.attributes.text))}})},function(e,t){function l(e){return"undefined"!==typeof e.attributes&&m.includes(e.name)&&(e.attributes=Object.assign(e.attributes,{captionsToTitles:{type:"boolean",default:!1}})),e}function r(e,t,l){var r=l.captionsToTitles;return"undefined"!==typeof r&&m.includes(t.name)&&(e.captionsToTitles=r),e}var __=wp.i18n.__,a=wp.hooks.addFilter,n=wp.element.Fragment,i=wp.blockEditor.InspectorControls,o=wp.compose.createHigherOrderComponent,s=wp.components,u=s.ToggleControl,c=s.PanelBody,d=s.PanelRow,m=["core/gallery"],b=o(function(e){return function(t){var l=t.name,r=t.attributes,a=t.setAttributes,o=r.captionsToTitles;return wp.element.createElement(n,null,wp.element.createElement(e,t),m.includes(l)&&wp.element.createElement(i,null,wp.element.createElement(c,null,wp.element.createElement(d,null,wp.element.createElement(u,{label:__("Use captions as titles"),help:__("experimental"),checked:o,onChange:function(){a({captionsToTitles:!o})}})))))}},"withAdvancedControls");a("blocks.registerBlockType","rlj/gallery-titles",l),a("editor.BlockEdit","rlj/gallery-titles-control",b),a("blocks.getSaveContent.extraProps","rlj/applyGalleryTitles",r)}]);